<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>SoulFoodieSpots</title>
  <link href="https://fonts.googleapis.com/css2?family=Alfa+Slab+One&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
</head>
<body>
  <header class="hero-header">
    <h1>SoulFoodieSpots</h1>
    <p>Discover soul food spots near you</p>
  </header>

  <section class="filter">
    <label for="stateFilter">Filter by State:</label>
    <select id="stateFilter" onchange="filterByState()">
      <option value="all">All</option>
      <option value="GA">Georgia</option>
      <option value="TX">Texas</option>
      <option value="LA">Louisiana</option>
    </select>
  </section>

  <section id="map-section">
    <h2>Map View</h2>
    <div id="map"></div>
  </section>

  <main>
    <div class="card-grid">
      <a href="https://example-restaurant1.com" class="card" data-state="GA" target="_blank">
        <img src="restaurant1.jpg" alt="Restaurant 1" />
        <div class="card-content">
          <h2>Momma's Kitchen</h2>
          <p>Classic Southern comfort food made with love - Georgia.</p>
        </div>
      </a>
      <a href="https://example-restaurant2.com" class="card" data-state="TX" target="_blank">
        <img src="restaurant2.jpg" alt="Restaurant 2" />
        <div class="card-content">
          <h2>Soul Spice</h2>
          <p>A fusion of soul food and bold spices - Texas.</p>
        </div>
      </a>
      <a href="https://example-restaurant3.com" class="card" data-state="LA" target="_blank">
        <img src="restaurant3.jpg" alt="Restaurant 3" />
        <div class="card-content">
          <h2>Cajun Queen</h2>
          <p>Authentic Cajun cuisine straight from Louisiana.</p>
        </div>
      </a>
    </div>
  </main>

  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script>
    const map = L.map('map').setView([33.7490, -84.3880], 5);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: 'Â© OpenStreetMap contributors'
    }).addTo(map);

    const restaurants = [
      {
        name: "Momma's Kitchen",
        lat: 33.7490,
        lng: -84.3880,
        state: "GA",
        url: "https://example-restaurant1.com"
      },
      {
        name: "Soul Spice",
        lat: 29.7604,
        lng: -95.3698,
        state: "TX",
        url: "https://example-restaurant2.com"
      },
      {
        name: "Cajun Queen",
        lat: 30.9843,
        lng: -91.9623,
        state: "LA",
        url: "https://example-restaurant3.com"
      }
    ];

    let markers = [];

    function updateMapMarkers(selectedState) {
      markers.forEach(marker => map.removeLayer(marker));
      markers = [];

      const filtered = selectedState === 'all'
        ? restaurants
        : restaurants.filter(r => r.state === selectedState);

      filtered.forEach(rest => {
        const marker = L.marker([rest.lat, rest.lng])
          .addTo(map)
          .bindPopup(`<strong><a href="${rest.url}" target="_blank">${rest.name}</a></strong>`);
        markers.push(marker);
      });

      if (filtered.length > 0) {
        const bounds = L.latLngBounds(filtered.map(r => [r.lat, r.lng]));
        map.fitBounds(bounds, { padding: [50, 50] });
      }
    }

    function filterByState() {
      const selected = document.getElementById('stateFilter').value;
      const cards = document.querySelectorAll('.card');
      cards.forEach(card => {
        card.style.display = selected === 'all' || card.dataset.state === selected ? 'flex' : 'none';
      });
      updateMapMarkers(selected);
    }

    updateMapMarkers('all'); // Initialize with all markers
  </script>
</body>
</html>